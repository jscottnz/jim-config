 <ion-view view-title="Routines">

     <ion-nav-bar class="bar-balanced">
     </ion-nav-bar>

   <ion-nav-buttons>
     <button class="button button-clear icon icon-right ion-ios-close-outline" ng-click="signout()"></button>
   </ion-nav-buttons>


   <ion-nav-buttons side="secondary">
		<button class="button button-clear icon icon-right" ng-click="save()" ng-class="(isPebble ? 'ion-android-watch' : 'ion-ios-cloud-upload-outline' )"></button>
   </ion-nav-buttons>

 	<ion-content>

        <div class="list card">
            <div class="item item-thumbnail-left item-text-wrap" ng-class="( data.fbRoutinesLoaded && !data.d.chosenDay.id ? 'item-calm' : 'item-light' )">
                <img src="images/avatar.jpg">

                <h2 ng-if="!data.fbRoutinesLoaded">Just one moment...</h2>
                <p ng-if="!data.fbRoutinesLoaded">Loading your routines</p>

                <h2 ng-if="data.fbRoutinesLoaded && !data.d.chosenDay.id">No current workout</h2>
                <p ng-if="data.fbRoutinesLoaded && !data.d.chosenDay.id">Use the <span class="icon icon-right ion-android-done"></span> to choose a Workout from one of the Routines below</p>

                <p ng-if="data.fbRoutinesLoaded && data.d.chosenDay.id">Current Workout:</p>
                <h2 ng-if="data.fbRoutinesLoaded && data.d.chosenDay.id">{{data.d.chosenDay.workoutName}}: {{data.d.chosenDay.name}}</h2>

                <p ng-if="!unsaved && data.fbRoutinesLoaded && data.d.chosenDay.id && !data.d.chosenDay.pushedToWatch" style="color: #e42112; font-size: xx-small">Saved {{lastSaved()}}, but not synced with watch. Use the Pebble App</p>
                <p ng-if="unsaved && data.fbRoutinesLoaded && data.d.chosenDay.id && !data.d.chosenDay.pushedToWatch" style="color: #e42112; font-size: xx-small">Not saved. Upload to save</p>
                <p ng-if="data.fbRoutinesLoaded && data.d.chosenDay.pushedToWatch" style="font-size: xx-small">Synced with watch {{lastSynced()}}</p>
            </div>
        </div>

 		<div class="calm" ng-if="data.fbRoutinesLoaded">
			<button class="button button-calm button-clear icon icon-right ion-plus" ng-click="showAddNew($event)"></button>
			<button class="button button-calm button-clear icon icon-right ion-shuffle" ng-click="showReorder = !showReorder"></button>
            <button class="button button-calm button-clear icon icon-right ion-clipboard" ng-click="showLogs()"></button>
            <button class="button button-calm button-clear icon icon-right ion-help" ng-click="showHelp()"></button>
		</div>

        <div class="list card" ng-if="data.fbRoutinesLoaded && !data.routineCount && !sampleWorkoutAdded">
            <div class="item item-thumbnail-left item-text-wrap">
                <img src="images/avatar.jpg">
                <h2>Hi! I'm Jim</h2>
                <p>Looks like you haven't added any routines yet!</p>
                <p ng-hide="showGetStarted">
                    <button class="button button-block button-positive" ng-click="showGetStarted = true">
                    Help me get started
                    </button>
                </p>
                <p>You can always <b>click the <span class="icon icon-right ion-help" style="black"></span> button on any screen for help</b></p>
            </div>
            <div class="item item-text-wrap" ng-if="showGetStarted">
                <p><b>This screen lists all your routines</b>, and you can have many. You might have one for summer and a different routine for winter.</p>
                <p><b>Routines are made up of workouts</b>. You might have a different workout per day, or just one workout that you love.</p>
                <p>I don't provide routines yet, so you'll have to add your own - it's really easy:</p>
                <p><b>Use the <span class="icon icon-right ion-plus" style="black"></span> button to add a routine</b></p>
                <p ng-show="!isPebble"><b>Use the <span class="icon icon-right ion-ios-cloud-upload-outline" style="black"></span> button to save changes</b></p>
                <p ng-show="isPebble"><b>Use the <span class="icon icon-right ion-android-watch" style="black"></span> button to save changes to the watch</b></p>


                <button class="button button-block button-positive" ng-hide="sampleWorkoutAdded" ng-click="addSampleWorkout()">
                    Add a Sample Workout for me
                </button>
            </div>
        </div>

 		<ion-list can-swipe="true" delegate-handle="workouts" show-reorder="showReorder" id="routineList">
            <ion-item ng-repeat="workout in data.d.workouts" ng-click="gotoWorkout({workout : workout, workouts : workouts})" class="item-icon-right">
 				<h2>
		    	{{workout.name}}
			    </h2>
			    <p ng-if="workout.days.length == 0">Add some days</p>
			    <p ng-if="workout.days.length != 0">{{workout.days.length}} days</p>

			   	<i class="button button-icon icon ion-chevron-left" style="opacity : 0.1;"></i>

                <ion-option-button class="button-balanced" ng-click="cloneWorkout(data.d.workouts, workout)">
                    Copy
                </ion-option-button>

			    <ion-option-button class="button-positive" ng-click="editWorkoutName(workout)">
			      Rename
			    </ion-option-button>
			    <ion-option-button class="button-assertive" ng-click="deleteWorkout(workout)">
			      Delete
			    </ion-option-button>
			    <ion-reorder-button class="ion-navicon" on-reorder="reorderItem(data.d.workouts, $fromIndex, $toIndex)"></ion-reorder-button>
 			</ion-item>
 		</ion-list>

        <div class="list card" ng-if="sampleWorkoutAdded">
            <div class="item item-thumbnail-left item-text-wrap">
                <img src="images/avatar.jpg">
                <h2>I added a sample workout</h2>
                <p>There's not much to it.</p>
                <p>Notice the <span class="icon icon-right ion-chevron-left" style="black"></span> on the right, that indicates that <b>you can swipe left to reveal more options</b></p>
            </div>
        </div>

        <div class="calm">
            <button class="button button-calm button-clear button-small icon icon-left ion-ios-bell-outline" ng-click="gotoWhatsNew()">What's new with Jim</button>
        </div>


    </ion-content>
</ion-view>
